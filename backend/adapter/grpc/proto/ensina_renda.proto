syntax = "proto3";

package ensina_renda;

import "google/api/annotations.proto";
import "google/api/field_behavior.proto";

option go_package = ".;grpc";

service EnsinaRendaService {
    rpc CadastrarAluno(CadastrarAlunoRequest) returns (CadastrarAlunoResponse) {
        option (google.api.http) = {    
            post: "/v1/aluno"
            body: "*"
        };
    }

    rpc VerificarAluno(VerificarAlunoRequest) returns (VerificarAlunoResponse) {
        option (google.api.http) = {    
            get: "/v1/aluno/{email}/{senha}"
        };
    }

    rpc ConcluirAula(ConcluirAulaRequest) returns (ConcluirAulaResponse) {
        option (google.api.http) = {    
            post: "/v1/aluno/{id_usuario}/{id_aula}"
            body: "*"
        };
    }

    rpc ConcluirModulo(ConcluirModuloRequest) returns (ConcluirModuloResponse) {
        option (google.api.http) = {    
            post: "/v1/aluno/{id_usuario}/{id_modulo}"
            body: "*"
        };
    }
}

message CadastrarAlunoRequest {
    string nome = 1 [(google.api.field_behavior) = REQUIRED];
    string email = 2 [(google.api.field_behavior) = REQUIRED];
    string senha = 3 [(google.api.field_behavior) = REQUIRED];
    string data_nascimento = 4 [(google.api.field_behavior) = REQUIRED];
}

message CadastrarAlunoResponse {
    string mensagem = 1;
    bool sucesso = 2;
}


message VerificarAlunoRequest{
    // Aqui é o hash SHA-256 do email
    string email = 1 [(google.api.field_behavior) = REQUIRED];
    // Aqui é o hash SHA-256 da senha
    string senha = 2 [(google.api.field_behavior) = REQUIRED];
}

message VerificarAlunoResponse {
    string mensagem = 1;
    bool sucesso = 2;
}

message ConcluirAulaRequest{
    int64 id_aula = 1 [(google.api.field_behavior) = REQUIRED];
    string id_usuario = 2 [(google.api.field_behavior) = REQUIRED];
}

message ConcluirAulaResponse{
    string mensagem = 1;
    bool sucesso = 2;
}

message ConcluirModuloRequest{
    string id_modulo = 1 [(google.api.field_behavior) = REQUIRED];
    string id_usuario = 2 [(google.api.field_behavior) = REQUIRED];
}

message ConcluirModuloResponse{
    string mensagem = 1;
    bool sucesso = 2;
}